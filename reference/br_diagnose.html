<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Diagnose regression models — br_diagnose • bregr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Diagnose regression models — br_diagnose"><meta name="description" content="
Universal diagnostic function that performs appropriate diagnostics based on
the model type. For Cox models, tests proportional hazards assumption using
Schoenfeld residuals and provides comprehensive Cox diagnostics.
For other models, provides general diagnostic information."><meta property="og:description" content="
Universal diagnostic function that performs appropriate diagnostics based on
the model type. For Cox models, tests proportional hazards assumption using
Schoenfeld residuals and provides comprehensive Cox diagnostics.
For other models, provides general diagnostic information."><meta property="og:image" content="https://wanglabcsu.github.io/bregr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bregr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/bregr-group-by.html">Group Regression Analysis and Visualization</a></li>
    <li><a class="dropdown-item" href="../articles/model-config.html">Model Configurations</a></li>
    <li><a class="dropdown-item" href="../articles/quick-analyze-cancer-data.html">Quickly Analyze Cancer Data with Data from UCSCXenaShiny</a></li>
    <li><a class="dropdown-item" href="../articles/save-model-file.html">Save Models to Local Disk</a></li>
    <li><a class="dropdown-item" href="../articles/supported-models.html">Supported Models</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/WangLabCSU/bregr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Diagnose regression models</h1>
      <small class="dont-index">Source: <a href="https://github.com/WangLabCSU/bregr/blob/main/R/07-diagnostics.R" class="external-link"><code>R/07-diagnostics.R</code></a></small>
      <div class="d-none name"><code>br_diagnose.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>Universal diagnostic function that performs appropriate diagnostics based on
the model type. For Cox models, tests proportional hazards assumption using
Schoenfeld residuals and provides comprehensive Cox diagnostics.
For other models, provides general diagnostic information.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">br_diagnose</span><span class="op">(</span><span class="va">breg</span>, idx <span class="op">=</span> <span class="cn">NULL</span>, transform <span class="op">=</span> <span class="st">"km"</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-breg">breg<a class="anchor" aria-label="anchor" href="#arg-breg"></a></dt>
<dd><p>A regression object with results (must pass <code>assert_breg_obj_with_results()</code>).</p></dd>


<dt id="arg-idx">idx<a class="anchor" aria-label="anchor" href="#arg-idx"></a></dt>
<dd><p>Index or name (focal variable) of the model(s) to diagnose. If <code>NULL</code>,
diagnoses all models in the breg object.</p></dd>


<dt id="arg-transform">transform<a class="anchor" aria-label="anchor" href="#arg-transform"></a></dt>
<dd><p>Character string specifying how to transform time for Cox PH tests.
Options are "km" (Kaplan-Meier), "rank", "identity", or a function.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to specific diagnostic functions.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing diagnostic results for each model.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other accessors:
<code><a href="accessors.html">accessors</a></code>,
<code><a href="br_predict.html">br_predict</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create models</span></span></span>
<span class="r-in"><span><span class="va">mds</span> <span class="op">&lt;-</span> <span class="fu"><a href="pipeline.html">br_pipeline</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">survival</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/survival/man/lung.html" class="external-link">lung</a></span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"time"</span>, <span class="st">"status"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="fu">survival</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/survival/man/lung.html" class="external-link">lung</a></span><span class="op">)</span><span class="op">[</span><span class="fl">6</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"sex"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"coxph"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> exponentiate estimates of model(s) constructed from <span style="color: #00BB00;">coxph</span> method at default</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Diagnose models (includes PH testing for Cox models)</span></span></span>
<span class="r-in"><span><span class="va">diagnostics</span> <span class="op">&lt;-</span> <span class="fu">br_diagnose</span><span class="op">(</span><span class="va">mds</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">diagnostics</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Model Diagnostics Summary</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Model: </span><span style="color: #0000BB; font-weight: bold;">"ph.ecog"</span><span style="font-weight: bold;"> (coxph)</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sample size: 227</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Events: 164</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Log-likelihood: -729.23</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Concordance: 12544, 7117, 126, 28, 0, 0.637, and 0.025</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Proportional Hazards Test (Schoenfeld Residuals):</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> + ph.ecog: χ² = 2.054, df = 1, p = 0.152</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> + age: χ² = 0.188, df = 1, p = 0.665</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> + sex: χ² = 2.305, df = 1, p = 0.129</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Global test: p = 0.216 - Assumption + SATISFIED</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Model: </span><span style="color: #0000BB; font-weight: bold;">"ph.karno"</span><span style="font-weight: bold;"> (coxph)</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sample size: 227</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Events: 164</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Log-likelihood: -735.078</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Concordance: 12578, 7145, 65, 28, 0, 0.637, and 0.025</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Proportional Hazards Test (Schoenfeld Residuals):</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> x ph.karno: χ² = 8.017, df = 1, p = 0.00463</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> + age: χ² = 0.478, df = 1, p = 0.489</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> + sex: χ² = 3.085, df = 1, p = 0.079</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Global test: p = 0.0157 - Assumption x VIOLATED</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Model: </span><span style="color: #0000BB; font-weight: bold;">"pat.karno"</span><span style="font-weight: bold;"> (coxph)</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sample size: 225</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Events: 162</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Log-likelihood: -721.587</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Concordance: 12343, 6957, 57, 26, 0, 0.639, and 0.025</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Proportional Hazards Test (Schoenfeld Residuals):</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> x pat.karno: χ² = 4.226, df = 1, p = 0.0398</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> + age: χ² = 0.054, df = 1, p = 0.817</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> + sex: χ² = 2.752, df = 1, p = 0.0971</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Global test: p = 0.0819 - Assumption + SATISFIED</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Model: </span><span style="color: #0000BB; font-weight: bold;">"meal.cal"</span><span style="font-weight: bold;"> (coxph)</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sample size: 181</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Events: 134</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Log-likelihood: -573.568</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Concordance: 7761, 5080, 7, 17, 0, 0.604, and 0.029</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Proportional Hazards Test (Schoenfeld Residuals):</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> x meal.cal: χ² = 4.65, df = 1, p = 0.031</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> + age: χ² = 0.622, df = 1, p = 0.43</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> + sex: χ² = 1.481, df = 1, p = 0.224</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Global test: p = 0.0942 - Assumption + SATISFIED</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Model: </span><span style="color: #0000BB; font-weight: bold;">"wt.loss"</span><span style="font-weight: bold;"> (coxph)</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sample size: 214</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Events: 152</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Log-likelihood: -673.056</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Concordance: 10531, 6672, 10, 22, 0, 0.612, and 0.027</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Proportional Hazards Test (Schoenfeld Residuals):</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> + wt.loss: χ² = 0.014, df = 1, p = 0.904</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> + age: χ² = 0.508, df = 1, p = 0.476</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> + sex: χ² = 2.549, df = 1, p = 0.11</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Global test: p = 0.391 - Assumption + SATISFIED</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://orcid.org/0000-0001-9855-7357" class="external-link">Shixiang Wang</a>, <a href="https://orcid.org/0000-0003-2801-3332" class="external-link">Yun Peng</a>, Chenyang Shu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

