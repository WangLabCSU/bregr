<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Easy and Efficient Batch Processing of Regression Models in R • bregr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Easy and Efficient Batch Processing of Regression Models in R">
<meta name="description" content="Easily process batches of univariate or multivariate regression models. Returns results in a tidy format and generates visualization plots for straightforward interpretation.">
<meta property="og:description" content="Easily process batches of univariate or multivariate regression models. Returns results in a tidy format and generates visualization plots for straightforward interpretation.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">bregr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/bregr-01-basics.html">01: Basics</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/WangLabCSU/bregr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="bregr-easy-and-efficient-batch-processing-of-regression-models-in-r">bregr: Easy and Efficient Batch Processing of Regression Models in R<a class="anchor" aria-label="anchor" href="#bregr-easy-and-efficient-batch-processing-of-regression-models-in-r"></a>
</h1></div>
<!-- badges: start -->

<p>The <strong>bregr</strong> package is designed to simplify and streamline the process of <strong>b</strong>atch processing <strong>reg</strong>ression models in <strong>R</strong>. Whether you’re working with univariate or multivariate models, bregr makes it easy to handle multiple analyses at once. The package returns results in a tidy format, ensuring that the output is organized and accessible for further analysis or reporting. Additionally, bregr generates clear visualization plots that aid in the straightforward interpretation of model results. This makes it an invaluable tool for anyone working with regression models in R, allowing you to focus more on deriving insights and less on the mechanics of setting up and processing models.</p>
<div class="section level2">
<h2 id="a-overview-of-regression-modeling-in-batch">A overview of regression modeling in batch<a class="anchor" aria-label="anchor" href="#a-overview-of-regression-modeling-in-batch"></a>
</h2>
<p>Regression modeling in batch involves constructing a series of regression models with same or different dependent variables <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>y</mi><mi>i</mi></msub><annotation encoding="application/x-tex">y_i</annotation></semantics></math> in each model, different independent variables <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>x</mi><mi>i</mi></msub><annotation encoding="application/x-tex">x_i</annotation></semantics></math> of interest (focal) in each model, and constant variables (constant) in all models.</p>
<p><span class="math display">$$
y_1 = \alpha_1 x_1 + \beta_1 c_1 + \gamma_1 c_2 \\
y_2 = \alpha_2 x_1 + \beta_2 c_1 + \gamma_2 c_2 \\
y_3 = \alpha_3 x_1 + \beta_3 c_1 + \gamma_3 c_2 \\
\cdots \\
y_4 = \alpha_n x_n + \beta_n c_1 + \gamma_4 c_2 \\
$$</span></p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the stable version of bregr from CRAN with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"bregr"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the development version of bregr from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"WangLabCSU/bregr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>Load package(s):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/WangLabCSU/bregr" class="external-link">bregr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Welcome to 'bregr' package!</span></span>
<span><span class="co">#&gt; =======================================================================</span></span>
<span><span class="co">#&gt; You are using bregr version 1.0.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Project home : https://github.com/WangLabCSU/bregr</span></span>
<span><span class="co">#&gt; Documentation: https://wanglabcsu.github.io/bregr/</span></span>
<span><span class="co">#&gt; Cite as      : arXiv:2110.14232</span></span>
<span><span class="co">#&gt; =======================================================================</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p>Load data:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lung</span> <span class="op">=</span> <span class="fu">survival</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/survival/man/lung.html" class="external-link">lung</a></span></span>
<span><span class="va">lung</span><span class="op">$</span><span class="va">ph.ecog</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">lung</span><span class="op">$</span><span class="va">ph.ecog</span><span class="op">)</span></span></code></pre></div>
<p>The design and implementation of bregr follow <a href="https://design.tidyverse.org/" class="external-link">Tidy design principles</a> and <a href="https://style.tidyverse.org/" class="external-link">Tidyverse style guide</a>, which is easy to understand and use.</p>
<div class="section level3">
<h3 id="basics-and-workflow">Basics and workflow<a class="anchor" aria-label="anchor" href="#basics-and-workflow"></a>
</h3>
<ol style="list-style-type: decimal">
<li>Construct a <code>breg</code> object:</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/breg.html">breg</a></span><span class="op">(</span><span class="va">lung</span><span class="op">)</span></span>
<span><span class="co">#&gt; A object of &lt;breg&gt; class with slots:</span></span>
<span><span class="co">#&gt; • y (response variable):</span></span>
<span><span class="co">#&gt; • x (focal term):</span></span>
<span><span class="co">#&gt; • x2 (control term):</span></span>
<span><span class="co">#&gt; • group_by:</span></span>
<span><span class="co">#&gt; • data: &lt;tibble[,11]&gt;</span></span>
<span><span class="co">#&gt; • config: NULL</span></span>
<span><span class="co">#&gt; • models: &lt;list: &gt;</span></span>
<span><span class="co">#&gt; • results: &lt;df[,0]&gt; with colnames</span></span>
<span><span class="co">#&gt; • results_tidy: &lt;df[,0]&gt; with colnames</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Focal term(s) are injected into the model one by one,</span></span>
<span><span class="co">#&gt; while control term(s) remain constant across all models in the batch.</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Set model response (i.e., dependent) variable(s):</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/breg.html">breg</a></span><span class="op">(</span><span class="va">lung</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/pipeline.html">br_set_y</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"time"</span>, <span class="st">"status"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; A object of &lt;breg&gt; class with slots:</span></span>
<span><span class="co">#&gt; • y (response variable): time and status</span></span>
<span><span class="co">#&gt; • x (focal term):</span></span>
<span><span class="co">#&gt; • x2 (control term):</span></span>
<span><span class="co">#&gt; • group_by:</span></span>
<span><span class="co">#&gt; • data: &lt;tibble[,11]&gt;</span></span>
<span><span class="co">#&gt; • config: NULL</span></span>
<span><span class="co">#&gt; • models: &lt;list: &gt;</span></span>
<span><span class="co">#&gt; • results: &lt;df[,0]&gt; with colnames</span></span>
<span><span class="co">#&gt; • results_tidy: &lt;df[,0]&gt; with colnames</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Focal term(s) are injected into the model one by one,</span></span>
<span><span class="co">#&gt; while control term(s) remain constant across all models in the batch.</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Set model predictor (i.e., independent) variables. In batch analysis, this is divided into two parts: 1) focal variables and 2) control variables.</li>
</ol>
<p>Focal variables are injected into constructed models one by one, while control variables remain constant across all constructed models.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/breg.html">breg</a></span><span class="op">(</span><span class="va">lung</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/pipeline.html">br_set_y</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"time"</span>, <span class="st">"status"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/pipeline.html">br_set_x</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">lung</span><span class="op">)</span><span class="op">[</span><span class="fl">6</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span>   <span class="co"># set focal terms</span></span>
<span>  <span class="fu"><a href="reference/pipeline.html">br_set_x2</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"sex"</span><span class="op">)</span><span class="op">)</span>          <span class="co"># set control terms, this is optional</span></span>
<span><span class="co">#&gt; A object of &lt;breg&gt; class with slots:</span></span>
<span><span class="co">#&gt; • y (response variable): time and status</span></span>
<span><span class="co">#&gt; • x (focal terms): ph.ecog, ph.karno, pat.karno, meal.cal, and wt.loss</span></span>
<span><span class="co">#&gt; • x2 (control terms): age and sex</span></span>
<span><span class="co">#&gt; • group_by:</span></span>
<span><span class="co">#&gt; • data: &lt;tibble[,11]&gt;</span></span>
<span><span class="co">#&gt; • config: NULL</span></span>
<span><span class="co">#&gt; • models: &lt;list: &gt;</span></span>
<span><span class="co">#&gt; • results: &lt;df[,0]&gt; with colnames</span></span>
<span><span class="co">#&gt; • results_tidy: &lt;df[,0]&gt; with colnames</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Focal term(s) are injected into the model one by one,</span></span>
<span><span class="co">#&gt; while control term(s) remain constant across all models in the batch.</span></span></code></pre></div>
<blockquote>
<p><code>terms</code> is desribed in the result object as bregr supports a more broader scope of predictors. e.g., <code>x + poly(x, 2)</code> has one variable x, but two terms <code>x</code> and <code>poly(x, 2)</code>.</p>
</blockquote>
<ol start="3" style="list-style-type: decimal">
<li>Set model configuration.</li>
</ol>
<p>Here, “coxph” (Cox-PH) for survival analysis is given.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mds</span> <span class="op">=</span> <span class="fu"><a href="reference/breg.html">breg</a></span><span class="op">(</span><span class="va">lung</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/pipeline.html">br_set_y</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"time"</span>, <span class="st">"status"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/pipeline.html">br_set_x</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">lung</span><span class="op">)</span><span class="op">[</span><span class="fl">6</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/pipeline.html">br_set_x2</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"sex"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/pipeline.html">br_set_model</a></span><span class="op">(</span><span class="st">"coxph"</span><span class="op">)</span></span>
<span><span class="va">mds</span></span>
<span><span class="co">#&gt; A object of &lt;breg&gt; class with slots:</span></span>
<span><span class="co">#&gt; • y (response variable): time and status</span></span>
<span><span class="co">#&gt; • x (focal terms): ph.ecog, ph.karno, pat.karno, meal.cal, and wt.loss</span></span>
<span><span class="co">#&gt; • x2 (control terms): age and sex</span></span>
<span><span class="co">#&gt; • group_by:</span></span>
<span><span class="co">#&gt; • data: &lt;tibble[,11]&gt;</span></span>
<span><span class="co">#&gt; • config: &lt;list: method = "coxph", extra = ""&gt;</span></span>
<span><span class="co">#&gt; • models: &lt;list: ph.ecog = &lt;glue&gt;, ph.karno = &lt;glue&gt;, pat.karno = &lt;glue&gt;, and</span></span>
<span><span class="co">#&gt; meal.cal = &lt;glue&gt;, wt.loss = &lt;glue&gt;&gt;</span></span>
<span><span class="co">#&gt; • results: &lt;df[,0]&gt; with colnames</span></span>
<span><span class="co">#&gt; • results_tidy: &lt;df[,0]&gt; with colnames</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Focal term(s) are injected into the model one by one,</span></span>
<span><span class="co">#&gt; while control term(s) remain constant across all models in the batch.</span></span></code></pre></div>
<p>We can check constructed model formulas in text format.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/accessors.html">br_get_models</a></span><span class="op">(</span><span class="va">mds</span><span class="op">)</span></span>
<span><span class="co">#&gt; $ph.ecog</span></span>
<span><span class="co">#&gt; survival::coxph(survival::Surv(time, status) ~ ph.ecog + age + sex, data = data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $ph.karno</span></span>
<span><span class="co">#&gt; survival::coxph(survival::Surv(time, status) ~ ph.karno + age + sex, data = data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $pat.karno</span></span>
<span><span class="co">#&gt; survival::coxph(survival::Surv(time, status) ~ pat.karno + age + sex, data = data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $meal.cal</span></span>
<span><span class="co">#&gt; survival::coxph(survival::Surv(time, status) ~ meal.cal + age + sex, data = data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $wt.loss</span></span>
<span><span class="co">#&gt; survival::coxph(survival::Surv(time, status) ~ wt.loss + age + sex, data = data)</span></span>
<span><span class="co"># or mds@models</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>The final step is constructing modeling with data and options defined above.</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mds</span> <span class="op">=</span> <span class="fu"><a href="reference/breg.html">breg</a></span><span class="op">(</span><span class="va">lung</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/pipeline.html">br_set_y</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"time"</span>, <span class="st">"status"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/pipeline.html">br_set_x</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">lung</span><span class="op">)</span><span class="op">[</span><span class="fl">6</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/pipeline.html">br_set_x2</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"sex"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/pipeline.html">br_set_model</a></span><span class="op">(</span><span class="st">"coxph"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/pipeline.html">br_run</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; set `exponentiate=TRUE` for model(s) constructed from coxph method at default</span></span>
<span><span class="va">mds</span></span>
<span><span class="co">#&gt; A object of &lt;breg&gt; class with slots:</span></span>
<span><span class="co">#&gt; • y (response variable): time and status</span></span>
<span><span class="co">#&gt; • x (focal terms): ph.ecog, ph.karno, pat.karno, meal.cal, and wt.loss</span></span>
<span><span class="co">#&gt; • x2 (control terms): age and sex</span></span>
<span><span class="co">#&gt; • group_by:</span></span>
<span><span class="co">#&gt; • data: &lt;tibble[,11]&gt;</span></span>
<span><span class="co">#&gt; • config: &lt;list: method = "coxph", extra = ""&gt;</span></span>
<span><span class="co">#&gt; • models: &lt;list: ph.ecog = &lt;coxph&gt;, ph.karno = &lt;coxph&gt;, pat.karno = &lt;coxph&gt;,</span></span>
<span><span class="co">#&gt; and meal.cal = &lt;coxph&gt;, wt.loss = &lt;coxph&gt;&gt;</span></span>
<span><span class="co">#&gt; • results: &lt;tibble[,21]&gt; with colnames Focal_variable, term, variable,</span></span>
<span><span class="co">#&gt; var_label, var_class, var_type, var_nlevels, contrasts, contrasts_type,</span></span>
<span><span class="co">#&gt; reference_row, label, n_obs, n_ind, n_event, exposure, estimate, std.error,</span></span>
<span><span class="co">#&gt; statistic, …, conf.low, and conf.high</span></span>
<span><span class="co">#&gt; • results_tidy: &lt;tibble[,8]&gt; with colnames Focal_variable, term, estimate,</span></span>
<span><span class="co">#&gt; std.error, statistic, p.value, conf.low, and conf.high</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Focal term(s) are injected into the model one by one,</span></span>
<span><span class="co">#&gt; while control term(s) remain constant across all models in the batch.</span></span></code></pre></div>
<p>Now the <code>models</code> slot has been updated to real model objects:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/accessors.html">br_get_models</a></span><span class="op">(</span><span class="va">mds</span><span class="op">)</span></span>
<span><span class="co">#&gt; $ph.ecog</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; survival::coxph(formula = survival::Surv(time, status) ~ ph.ecog + </span></span>
<span><span class="co">#&gt;     age + sex, data = data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;               coef exp(coef)  se(coef)      z        p</span></span>
<span><span class="co">#&gt; ph.ecog1  0.410048  1.506890  0.199604  2.054  0.03995</span></span>
<span><span class="co">#&gt; ph.ecog2  0.903303  2.467741  0.228078  3.960 7.48e-05</span></span>
<span><span class="co">#&gt; ph.ecog3  1.954543  7.060694  1.029701  1.898  0.05767</span></span>
<span><span class="co">#&gt; age       0.010795  1.010853  0.009312  1.159  0.24637</span></span>
<span><span class="co">#&gt; sex      -0.545831  0.579360  0.168228 -3.245  0.00118</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Likelihood ratio test=30.87  on 5 df, p=9.952e-06</span></span>
<span><span class="co">#&gt; n= 227, number of events= 164 </span></span>
<span><span class="co">#&gt;    (1 observation deleted due to missingness)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $ph.karno</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; survival::coxph(formula = survival::Surv(time, status) ~ ph.karno + </span></span>
<span><span class="co">#&gt;     age + sex, data = data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;               coef exp(coef)  se(coef)      z       p</span></span>
<span><span class="co">#&gt; ph.karno -0.013322  0.986767  0.005880 -2.266 0.02348</span></span>
<span><span class="co">#&gt; age       0.012375  1.012452  0.009405  1.316 0.18821</span></span>
<span><span class="co">#&gt; sex      -0.497170  0.608249  0.167713 -2.964 0.00303</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Likelihood ratio test=18.81  on 3 df, p=0.0002987</span></span>
<span><span class="co">#&gt; n= 227, number of events= 164 </span></span>
<span><span class="co">#&gt;    (1 observation deleted due to missingness)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $pat.karno</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; survival::coxph(formula = survival::Surv(time, status) ~ pat.karno + </span></span>
<span><span class="co">#&gt;     age + sex, data = data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                coef exp(coef)  se(coef)      z        p</span></span>
<span><span class="co">#&gt; pat.karno -0.019061  0.981120  0.005638 -3.381 0.000722</span></span>
<span><span class="co">#&gt; age        0.011793  1.011863  0.009331  1.264 0.206269</span></span>
<span><span class="co">#&gt; sex       -0.519262  0.594959  0.168967 -3.073 0.002118</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Likelihood ratio test=24.33  on 3 df, p=2.133e-05</span></span>
<span><span class="co">#&gt; n= 225, number of events= 162 </span></span>
<span><span class="co">#&gt;    (3 observations deleted due to missingness)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $meal.cal</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; survival::coxph(formula = survival::Surv(time, status) ~ meal.cal + </span></span>
<span><span class="co">#&gt;     age + sex, data = data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                coef  exp(coef)   se(coef)      z     p</span></span>
<span><span class="co">#&gt; meal.cal -0.0001341  0.9998659  0.0002383 -0.563 0.574</span></span>
<span><span class="co">#&gt; age       0.0152942  1.0154117  0.0105352  1.452 0.147</span></span>
<span><span class="co">#&gt; sex      -0.4914187  0.6117579  0.1908601 -2.575 0.010</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Likelihood ratio test=10.65  on 3 df, p=0.01376</span></span>
<span><span class="co">#&gt; n= 181, number of events= 134 </span></span>
<span><span class="co">#&gt;    (47 observations deleted due to missingness)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $wt.loss</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; survival::coxph(formula = survival::Surv(time, status) ~ wt.loss + </span></span>
<span><span class="co">#&gt;     age + sex, data = data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;               coef  exp(coef)   se(coef)      z      p</span></span>
<span><span class="co">#&gt; wt.loss  0.0007596  1.0007599  0.0061934  0.123 0.9024</span></span>
<span><span class="co">#&gt; age      0.0200882  1.0202913  0.0096644  2.079 0.0377</span></span>
<span><span class="co">#&gt; sex     -0.5210319  0.5939074  0.1743541 -2.988 0.0028</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Likelihood ratio test=14.67  on 3 df, p=0.002122</span></span>
<span><span class="co">#&gt; n= 214, number of events= 152 </span></span>
<span><span class="co">#&gt;    (14 observations deleted due to missingness)</span></span></code></pre></div>
<p>Tidy and comprehensive modeling results can be obtained from slots <code>results_tidy</code> and <code>results</code>, respectively.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/accessors.html">br_get_results</a></span><span class="op">(</span><span class="va">mds</span>, tidy <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 17 × 8</span></span>
<span><span class="co">#&gt;    Focal_variable term   estimate std.error statistic p.value conf.low conf.high</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;          &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 ph.ecog        ph.ec…    1.51   0.200        2.05  3.99e-2    1.02      2.23 </span></span>
<span><span class="co">#&gt;  2 ph.ecog        ph.ec…    2.47   0.228        3.96  7.48e-5    1.58      3.86 </span></span>
<span><span class="co">#&gt;  3 ph.ecog        ph.ec…    7.06   1.03         1.90  5.77e-2    0.938    53.1  </span></span>
<span><span class="co">#&gt;  4 ph.ecog        age       1.01   0.00931      1.16  2.46e-1    0.993     1.03 </span></span>
<span><span class="co">#&gt;  5 ph.ecog        sex       0.579  0.168       -3.24  1.18e-3    0.417     0.806</span></span>
<span><span class="co">#&gt;  6 ph.karno       ph.ka…    0.987  0.00588     -2.27  2.35e-2    0.975     0.998</span></span>
<span><span class="co">#&gt;  7 ph.karno       age       1.01   0.00940      1.32  1.88e-1    0.994     1.03 </span></span>
<span><span class="co">#&gt;  8 ph.karno       sex       0.608  0.168       -2.96  3.03e-3    0.438     0.845</span></span>
<span><span class="co">#&gt;  9 pat.karno      pat.k…    0.981  0.00564     -3.38  7.22e-4    0.970     0.992</span></span>
<span><span class="co">#&gt; 10 pat.karno      age       1.01   0.00933      1.26  2.06e-1    0.994     1.03 </span></span>
<span><span class="co">#&gt; 11 pat.karno      sex       0.595  0.169       -3.07  2.12e-3    0.427     0.829</span></span>
<span><span class="co">#&gt; 12 meal.cal       meal.…    1.00   0.000238    -0.563 5.74e-1    0.999     1.00 </span></span>
<span><span class="co">#&gt; 13 meal.cal       age       1.02   0.0105       1.45  1.47e-1    0.995     1.04 </span></span>
<span><span class="co">#&gt; 14 meal.cal       sex       0.612  0.191       -2.57  1.00e-2    0.421     0.889</span></span>
<span><span class="co">#&gt; 15 wt.loss        wt.lo…    1.00   0.00619      0.123 9.02e-1    0.989     1.01 </span></span>
<span><span class="co">#&gt; 16 wt.loss        age       1.02   0.00966      2.08  3.77e-2    1.00      1.04 </span></span>
<span><span class="co">#&gt; 17 wt.loss        sex       0.594  0.174       -2.99  2.80e-3    0.422     0.836</span></span>
<span><span class="fu"><a href="reference/accessors.html">br_get_results</a></span><span class="op">(</span><span class="va">mds</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 18 × 21</span></span>
<span><span class="co">#&gt;    Focal_variable term      variable  var_label var_class var_type   var_nlevels</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;            &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 ph.ecog        ph.ecog0  ph.ecog   ph.ecog   factor    categoric…           4</span></span>
<span><span class="co">#&gt;  2 ph.ecog        ph.ecog1  ph.ecog   ph.ecog   factor    categoric…           4</span></span>
<span><span class="co">#&gt;  3 ph.ecog        ph.ecog2  ph.ecog   ph.ecog   factor    categoric…           4</span></span>
<span><span class="co">#&gt;  4 ph.ecog        ph.ecog3  ph.ecog   ph.ecog   factor    categoric…           4</span></span>
<span><span class="co">#&gt;  5 ph.ecog        age       age       age       numeric   continuous          NA</span></span>
<span><span class="co">#&gt;  6 ph.ecog        sex       sex       sex       numeric   continuous          NA</span></span>
<span><span class="co">#&gt;  7 ph.karno       ph.karno  ph.karno  ph.karno  numeric   continuous          NA</span></span>
<span><span class="co">#&gt;  8 ph.karno       age       age       age       numeric   continuous          NA</span></span>
<span><span class="co">#&gt;  9 ph.karno       sex       sex       sex       numeric   continuous          NA</span></span>
<span><span class="co">#&gt; 10 pat.karno      pat.karno pat.karno pat.karno numeric   continuous          NA</span></span>
<span><span class="co">#&gt; 11 pat.karno      age       age       age       numeric   continuous          NA</span></span>
<span><span class="co">#&gt; 12 pat.karno      sex       sex       sex       numeric   continuous          NA</span></span>
<span><span class="co">#&gt; 13 meal.cal       meal.cal  meal.cal  meal.cal  numeric   continuous          NA</span></span>
<span><span class="co">#&gt; 14 meal.cal       age       age       age       numeric   continuous          NA</span></span>
<span><span class="co">#&gt; 15 meal.cal       sex       sex       sex       numeric   continuous          NA</span></span>
<span><span class="co">#&gt; 16 wt.loss        wt.loss   wt.loss   wt.loss   numeric   continuous          NA</span></span>
<span><span class="co">#&gt; 17 wt.loss        age       age       age       numeric   continuous          NA</span></span>
<span><span class="co">#&gt; 18 wt.loss        sex       sex       sex       numeric   continuous          NA</span></span>
<span><span class="co">#&gt; # ℹ 14 more variables: contrasts &lt;chr&gt;, contrasts_type &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   reference_row &lt;lgl&gt;, label &lt;chr&gt;, n_obs &lt;dbl&gt;, n_ind &lt;dbl&gt;, n_event &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   exposure &lt;dbl&gt;, estimate &lt;dbl&gt;, std.error &lt;dbl&gt;, statistic &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   p.value &lt;dbl&gt;, conf.low &lt;dbl&gt;, conf.high &lt;dbl&gt;</span></span></code></pre></div>
<p>We can see that the whole workflow is easy to read and they are combined by R native operators.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">breg</span>(lung) <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="fu">br_set_y</span>(<span class="fu">c</span>(<span class="st">"time"</span>, <span class="st">"status"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="fu">br_set_x</span>(<span class="fu">colnames</span>(lung)[<span class="dv">6</span><span class="sc">:</span><span class="dv">10</span>]) <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>  <span class="fu">br_set_x2</span>(<span class="fu">c</span>(<span class="st">"age"</span>, <span class="st">"sex"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>  <span class="fu">br_set_model</span>(<span class="st">"coxph"</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>  <span class="fu">br_run</span>()</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="pipeline-function">Pipeline function<a class="anchor" aria-label="anchor" href="#pipeline-function"></a>
</h3>
<p>Given the develop experience in <a href="https://github.com/ShixiangWang/ezcox/" class="external-link">ezcox</a>, we create a pipeline function for common one-step use.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/pipeline.html">br_pipeline</a></span><span class="op">(</span></span>
<span>  <span class="va">lung</span>,</span>
<span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"time"</span>, <span class="st">"status"</span><span class="op">)</span>,</span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">lung</span><span class="op">)</span><span class="op">[</span><span class="fl">6</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,</span>
<span>  x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"sex"</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"coxph"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visualization">Visualization<a class="anchor" aria-label="anchor" href="#visualization"></a>
</h3>
<p>bregr mainly provides <code><a href="reference/br_show_forest.html">br_show_forest()</a></code> for result data.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/br_show_forest.html">br_show_forest</a></span><span class="op">(</span><span class="va">mds</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-10-1.png" width="100%"></p>
</div>
</div>
<div class="section level2">
<h2 id="coverage">Coverage<a class="anchor" aria-label="anchor" href="#coverage"></a>
</h2>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">covr</span><span class="fu">::</span><span class="fu">package_coverage</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; bregr Coverage: 82.20%</span></span>
<span><span class="co">#&gt; R/98-utils.R: 41.03%</span></span>
<span><span class="co">#&gt; R/04-show.R: 80.21%</span></span>
<span><span class="co">#&gt; R/03-accessors.R: 82.86%</span></span>
<span><span class="co">#&gt; R/02-pipeline.R: 90.48%</span></span>
<span><span class="co">#&gt; R/99-zzz.R: 90.91%</span></span>
<span><span class="co">#&gt; R/05-polar.R: 97.37%</span></span>
<span><span class="co">#&gt; R/01-class.R: 100.00%</span></span>
<span><span class="co">#&gt; R/06-avail.R: 100.00%</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="license">LICENSE<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>(GPL-3) Copyright (c) 2025 Shixiang Wang &amp; WangLabCSU team</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/WangLabCSU/bregr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/WangLabCSU/bregr/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing bregr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Shixiang Wang <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9855-7357" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Yun Peng <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-2801-3332" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Chenyang Shu <br><small class="roles"> Author </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=bregr" class="external-link"><img src="https://www.r-pkg.org/badges/version/bregr" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=bregr" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/bregr?color=blue"></a></li>
<li><a href="https://github.com/WangLabCSU/bregr/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/WangLabCSU/bregr/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shixiang Wang, Yun Peng, Chenyang Shu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
